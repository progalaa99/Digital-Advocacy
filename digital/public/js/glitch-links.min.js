class glitchSlide{constructor(i){this.DOM={el:i},this.DOM.slideImg=this.DOM.el.querySelector(".slide__img"),this.bgImage=this.DOM.slideImg.style.backgroundImage,this.layout()}layout(){this.DOM.slideImg.innerHTML=`<div class='glitch__img' style='background-image: ${this.DOM.slideImg.style.backgroundImage};'></div>`.repeat(5),this.DOM.glitchImgs=Array.from(this.DOM.slideImg.querySelectorAll(".glitch__img"))}changeBGImage(i,t=0,s=0){setTimeout(()=>this.DOM.glitchImgs[t].style.backgroundImage=i,s)}}class GlitchSlideshow{constructor(i){this.DOM={el:i},this.DOM.slides=Array.from(this.DOM.el.querySelectorAll(".slide")),this.slidesTotal=this.DOM.slides.length,this.slides=[],this.DOM.slides.forEach(i=>this.slides.push(new glitchSlide(i))),this.current=0,this.glitchTime=1200,this.totalGlitchSlices=5}glitch(i,t){return new Promise((s,e)=>{i.DOM.slideImg.classList.add("glitch--animate");const l=i.bgImage,h=t.bgImage;for(let t=this.totalGlitchSlices-1;t>=0;--t)i.changeBGImage(h,t,this.glitchTime/(this.totalGlitchSlices+1)*(this.totalGlitchSlices-t-1)+this.glitchTime/(this.totalGlitchSlices+1));setTimeout(()=>{i.DOM.slideImg.classList.remove("glitch--animate");for(let t=this.totalGlitchSlices-1;t>=0;--t)i.changeBGImage(l,t,0);s()},this.glitchTime)})}navigate(i){if(!this.isReady(i))return;this.isAnimating=!0;const t=i;this.glitch(this.slides[this.current],this.slides[t]).then(()=>{this.DOM.slides[this.current].classList.remove("slide--current"),this.current=t,this.DOM.slides[this.current].classList.add("slide--current"),this.isAnimating=!1})}isReady(i){return!(this.isAnimating||i===this.current)}}
